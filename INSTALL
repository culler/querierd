Installing QuerierD
=====================

There are two steps to installing QuerierD.  First you need to
install a python package named querier, as well as the package
called netifaces which QuerierD uses.

If you have python setuptools installed, then the command

python setup.py install

should install both packages, as needed.  If you don't have
setuptools you will need to install netifaces separately.
Step 1 may or may not require superuser permissions, depending
on how your python installation is configured.

Step 2 is to set up the querierd as a system service.  This
involves copying a couple of files into your system directories,
and must be done as root.  The details depend on your operating
system.  Here are the details:

Linux systems that use upstart (e.g. recent ubuntu systems):
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

  FIRST: edit ./etc/querierd to specify the IP interface you want
  your querier to use.  (Default is eth0).

  THEN:
  sudo cp etc/querierd /etc/querierd
  sudo cp etc/init/querierd.conf /etc/init/querierd.conf

  * Don't forget to check the permissions!

Linux systems that use traditional sysv scripts:
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

  FIRST: edit ./etc/querierd to specify the IP interface you want
  your querier to use.  (Default is eth0).

  THEN:
  sudo cp etc/init.d/querierd /etc/init.d/querierd
  sudo cp etc/querierd /etc/querierd

 * Don't forget to check the permissions!
 * Use your favorite method to create the appropriate symlinks in
   the rc directories.

OS X 
~~~~

  FIRST: edit ./etc/querierd to specify the IP interface you want
  your querier to use.  (Default is eth0).

  SECOND: edit ./Library/LaunchDaemons/org.querierd to use the
  same python as you used to install the package.  (Default is
  /Library/Frameworks/Python.framework/Versions/2.7/bin/python).

  THEN:
  sudo cp etc/querierd /etc/querierd
  sudo cp Library/LaunchDaemons/org.querierd.plist /Library/LaunchDaemons

  FINALLY: reboot


Testing
--------

After starting the daemon by

$ sudo python -m querier.daemon start

you can run tcpdump and watch the IGMP traffic:

$ sudo tcpdump -nv -ieth0 igmp

(replace eth0 by the appropriate interface on your computer).

Also, you can run avahi-browse to check that all of your devices and
services are visible:

$ avahi-browse -at

To stop the daemon:

$sudo python -m querier.daemon stop